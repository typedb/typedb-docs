= TypeDB Console
:keywords: typedb, console, CLI, terminal, REPL
:pageTitle: TypeDB Console manual
:summary: TypeDB Console documentation.
:tabs-sync-option:
:experimental:
:page-preamble-card: 1


// tag::body[]
[.float-group]
--
image::drivers::console.png[TypeDB Console hero image, role="right", width = 50%, window=_blank, link=self]

  +
TypeDB Console is a standalone TypeDB client with a command line interface (CLI). It serves as a lightweight and
powerful CLI tool to manage and query TypeDB databases.
--

[cols-2]
--
.link:https://github.com/typedb/typedb-console[GitHub,window=_blank]
[.clickable]
****
The GitHub repository with the source code and release notes.
****

.link:https://cloudsmith.io/~typedb/repos/public-release/packages/?q=name%3A%27%5Etypedb-console%27&sort=-version[Downloads,window=_blank]
[.clickable]
****
See the Console's downloadable packages.
****
--

== Install

Make sure Java 11+ is installed.
TypeDB Console supports https://jdk.java.net[OpenJDK,window=_blank] and
https://www.oracle.com/java/technologies/downloads/#java11[Oracle JDK,window=_blank].

NOTE: Java dependency is expected to be removed in 2025.

For installation instructions, follow the steps below for your OS:

[tabs]
====
macOS::
+
--
. Download the latest package for your system architecture:
include::{page-component-version}@manual:resources:partial$typedb-console-latest-links.adoc[tag=mac]
+
For other versions, see the
https://cloudsmith.io/~typedb/repos/public-release/packages/?q=format%3Araw+name%3A%5Etypedb-console-mac&sort=-version[Downloads repository] page.
. Extract the archive into a new directory:
+
[source,console]
----
$ sudo mkdir /opt/typedb-console
$ unzip ~/Downloads/<filename>.zip -d /opt/typedb-console
----
+
Where `<filename>` is the name of the archive.
. Add a symlink to the TypeDB Console executable in the `/usr/local/bin` directory:
+
[source,console]
----
$ ln -s /opt/typedb-console/<filename>/typedb /usr/local/bin/typedb
----
--

Linux::
+
--
. Download the latest package for your system architecture:
include::{page-component-version}@manual:resources:partial$typedb-console-latest-links.adoc[tag=linux]
+
For other versions, see the
https://cloudsmith.io/~typedb/repos/public-release/packages/?q=format%3Araw+name%3A%5Etypedb-console-linux&sort=-version[Downloads repository] page.
. Extract the archive into a new directory:
+
[source,console]
----
$ mkdir /opt/typedb-console
$ tar -xzf ~/Downloads/<filename>.tar.gz -C /opt/typedb-console
----
+
Where `<filename>` is the name of the archive.
. Add a symlink to the TypeDB Console executable in the `/usr/local/bin` directory:
+
[source,console]
----
$ ln -s /opt/typedb-console/<filename>/typedb /usr/local/bin/typedb
----
--

Windows::
+
--
. Download the latest package for your system architecture:
include::{page-component-version}@manual:resources:partial$typedb-console-latest-links.adoc[tag=windows]
+
For other versions, see the
https://cloudsmith.io/~typedb/repos/public-release/packages/?q=format%3Araw+name%3A%5Etypedb-console-win&sort=-version[Downloads repository] page.

. Extract the archive into a new directory:
+
[source,console]
----
$ mkdir "C:\Program Files\TypeDB Console"
$ tar xvf "C:\Users\username\Downloads\<filename>.zip" -C "C:\Program Files\TypeDB Console"
----
+
Where `<filename>` is the name of the archive.
. Update the `PATH` environment variable:
+
[source,console]
----
$ setx /M PATH "%path%;C:\Program Files\TypeDB Console\<filename>"
----

Restart the terminal window for the changes to environment variables to take effect.
--
====

[#_connect_to_typedb]
== Connect to TypeDB

TypeDB Console can connect to all editions of TypeDB. Running TypeDB Console initiates a network connection to a TypeDB
server. Use command line arguments to set connection parameters (if unset it will try to connect to a TypeDB Community
Edition server at the address `localhost:1729`):

[tabs]
====
Cloud / Enterprise::
+
--
// tag::connect_cloud_console[]
.Connect to TypeDB Cloud or TypeDB Enterprise
[source,console]
----
typedb console --cloud=<server-address> --username=<username> --password --tls-enabled=true
----

You will be prompted for a password.

[NOTE]
=====
For newly deployed clusters, the default username and password are `admin` and `password`. After connecting for the first time, you will be required to xref:{page-version}@manual::configuring/users.adoc#_first_login[change the password] before queries can be run.
=====
// end::connect_cloud_console[]
--

Community Edition::
+
--
// tag::connect_core_console[]
.Connect to TypeDB Community Edition
[source,console]
----
typedb console --core=<server-address> --username=<username> --password
----

You will be prompted for a password.

The `--core` argument is used to set the TypeDB Community Edition server IP address and port to connect to,
for example, `10.0.0.5:1729`.

[NOTE]
=====
The default username and password are `admin` and `password`. After connecting for the first time, you will be able to xref:{page-version}@manual::configuring/users.adoc#_first_login[change the password].
=====
// end::connect_core_console[]
--
====

As a result, you get a welcome message from TypeDB Console followed by a command line prompt.

----
Welcome to TypeDB Console. You are now in TypeDB Wonderland!
Copyright (C) Vaticle

>
----

See full list of available CLI arguments in the <<_command_line_arguments>> reference section below.

[#_REPL]
== Interactive mode

TypeDB Console provides two levels of interaction via Read–eval–print loop
(https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop[REPL,window=_blank]):
Server level and Transaction level.

At any level you can use common commands: `help`, `clear`, `exit`.

[#_server_level]
=== Server level

Server level is the first level of interaction, i.e., *first-level REPL*.
From this level, you can use commands for managing databases and users on the server.
You also can open a transaction to a database, which gets you to the <<_transaction_level,second level of REPL>>.

For a full list of commands on the Server level, see the <<_server_level_commands>> section.

[#_transaction_level]
=== Transaction level

Transaction level is the second level of interaction, i.e., *second-level REPL*.
You can control a transaction and send queries in the transaction.

For a full list of commands on the Transaction level, see the <<_transaction_level>> reference section.

[NOTE]
====
To send a query, while in Transaction level, type in or insert a TypeQL query and push btn:[Enter] twice.
====

When opening a transaction, you can specify transaction options.
For a full list of transaction options, see the <<_transaction_options>>.

[#_interactive_mode_example]
=== Example

The following example illustrates how to create a database, define a schema, and insert some data into the database.

. Run Console in the interactive mode and <<_connect_to_typedb,connect>> it to TypeDB:
+
[source,console]
----
typedb console --username=<username> --password
----

. Now, run the following command to create a database:
+
----
database create sample_db
----

. To define a schema, run the `transaction` command to open a `schema` transaction to the database.
This command opens a Transaction level REPL.
Use it to send a define query and commit changes:
+
----
transaction sample_db schema
define entity user;
commit
----

+
To send a query in the Transaction level, push btn:[Enter] *twice*,
as a single push of the btn:[Enter] is recognized as a line break in the query.

. Insert data with a `write` transaction:
+
----
transaction sample_db write
insert $u isa user;
commit
----

The above example creates a database with the name `sample_db`,
defines a simple schema with a single `user` type,
then inserts a single instance of the type into the database.

[#_non_interactive_mode]
== Non-interactive mode

You can run Console commands using the `--command` argument:

[,bash]
[source,console]
----
typedb console --command=<command1> --command=<command2>
----

[#_command_argument_example]

The following example achieves the same results as the <<_interactive_mode_example,one in the interactive mode>>
via the command line arguments.
Run the following command in a terminal to start TypeDB and execute queries:

[,bash]
[source,console]
----
typedb console --username=<username> --password \
--command="database create sample_db" \
--command="database list" \
--command="transaction sample_db schema" \
--command="define entity user;" \
--command="commit" \
--command="transaction sample_db write" \
--command='insert $u isa user;' \
--command="commit"
----

.See the output
[%collapsible]
====
.Output
----
+ database create sample_db
Database 'sample_db' created
+ database list
sample_db
test
+ transaction sample_db schema
++ define entity user;
Success
++ commit
Transaction changes committed
+ transaction sample_db write
++ insert $u isa user;
Finished validation and compilation...
Finished writes. Streaming answers...

   --------
    $u | iid 0x1e00000000000000000000 isa user
   --------

Finished. Total answers: 1
----
====

== Scripting

You can create a script file that contains the list of commands to run.
These are the very same commands that are used in the <<_REPL>> or <<_non_interactive_mode>>.
For the full list of commands, see the <<_references>> below.

To use a script file with commands, run Console with the `--script` argument and a path to the script file:

[source,console]
----
typedb console --script=<script-file-path>
----

[NOTE]
====
Each line in the script file is interpreted as one command, so multiline queries are not available in this mode.
You can overcome this limitation, by calling a TypeQL query from a file with the `source` command.
For example, see the <<_run_a_query_from_a_file>> section below.
====

[#_script_example]
Prepare the script to run and save it to a local file.
For example, let's try the following `script.txt` file:

.script.txt
----
database create test
transaction test schema
    define entity user owns name; attribute name value string;
    commit
transaction test write
    insert $u isa user, has name "Bob";
    commit
transaction test read
    match $u isa user, has name $n; select $n;
    close
database delete test
----

Execute the script with TypeDB Console:

.Run script.txt
[source,console]
----
typedb console --username=<username> --password --script=<PATH/script.txt>
----

Where `<PATH/script.txt>` is the path to the file and the filename.

.See the output
[%collapsible]
====
.Output
----
+ database create test
Database 'test' created
+ transaction test schema
++ define entity user owns name; attribute name value string;
Success
++ commit
Transaction changes committed
+ transaction test write
++ insert $u isa user, has name "Bob";
Finished validation and compilation...
Finished writes. Streaming answers...

   --------
    $u | iid 0x1e00000000000000000000 isa user
   --------

Finished. Total answers: 1
++ commit
Transaction changes committed
+ transaction test read
++ match $u isa user, has name $n; select $n;
Finished validation and compilation...
Streaming answers...

   --------
    $n | Bob isa name
   --------

Finished. Total answers: 1
++ close
Transaction closed
+ database delete test
Database 'test' deleted
----
====

[#_run_a_query_from_a_file]
== Run a query from a file

To run a TypeQL query stored in a file, use the `source <filename>` command.
This command is available from the <<_transaction_level>> REPL:

.Interactive mode source usage example
----
transaction sample_db schema
source schema.tql
commit
----

The `schema.tql` file should be located in the working directory, when you run TypeDB Console,
and contain a valid define query.

=== Script using query files examples

For example, let's use the following script file to:

* Create the `sample_db` database
* Load the schema form the xref:schema-include[schema.tql,window=_blank] file in a schema transaction
* Load sample data from the xref:data-include[data.tql,window=_blank] file in a write transaction
* Run a match-fetch query
* Delete the database to reset the environment

.Script file
----
database create sample_db
transaction sample_db schema
    source schema.tql
    commit
transaction sample_db write
    source data.tql
    commit
transaction sample_db read
    match $u isa user; fetch { "user": { $u.* } };
    close
database delete sample_db
----

[[schema-include]]
.See the schema.tql
[%collapsible]
====
.schema.tql
[,typeql]
----
include::{page-version}@home::example$tql/schema_small.tql[]
----
====

[[data-include]]
.See the data.tql
[%collapsible]
====
.data.tql
[,typeql]
----
include::{page-version}@manual::example$tql/console_data.tql[]
----
====

Make sure you have the above script file and `tql` files saved to the working directory.
Run the script with TypeDB Console using the `--script` argument,
as you did before in the <<_script_example,script example>>.

.See the output
[%collapsible]
====
.Output
----
+ database create sample_db
Database 'sample_db' created
+ transaction sample_db schema
++ source schema.tql
Finished writes
++ commit
Transaction changes committed
+ transaction sample_db write
++ source data.tql
Finished writes
++ commit
Transaction changes committed
+ transaction sample_db read
++ match $u isa user; fetch { "user": { $u.* } };
Finished validation and compilation...
Streaming documents...

{
    "user": {
        "email": "bob@typedb.com",
        "relationship-status": "single",
        "username": "bob"
    }
}
{
    "user": {
        "email": "alice@typedb.com",
        "relationship-status": "married",
        "username": "alice"
    }
}

Finished. Total answers: 2
++ close
Transaction closed
+ database delete sample_db
Database 'sample_db' deleted
----
====

== Troubleshooting

=== Non-ASCII characters

TypeDB can use type and variable labels and store string value attributes that have characters outside the
https://ascii.cl/[ASCII,window=_blank] range, for example, non-English letters, symbols, and emojis.
To manipulate them using Console, the Console's terminal must use a
locale with a compatible code set, such as Unicode.

If it doesn't, these characters will most likely be rendered as `?` symbols in Console.
If this issue occurs, you can use the following fix:

[tab:Linux]

[tabs]
====
Linux::
+
--
Use `locale -a` to list all installed locales, and use `export` to set the environment.
For example, to use `en_US.UTF-8` run:

[source,console]
----
bash export LANG=en_US.UTF-8 && export LC_ALL=en_US.UTF-8
----
--

macOS::
+
--
Use `locale -a` to list all installed locales, and use `export` to set the environment.
For example, to use `en_US.UTF-8` run:

[source,console]
----
bash export LANG=en_US.UTF-8 && export LC_ALL=en_US.UTF-8
----
--

Windows::
+
--
Use https://apps.microsoft.com/store/detail/windows-terminal/9N0DX20HK701?hl=en-gb&gl=GB[Windows Terminal,window=_blank]
or run https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/chcp[chcp,window=_blank] in the
terminal (e.g., `chcp 936` for Chinese text).
--
====

Most systems also allow us to set the system-wide locale.
However, this impacts the appearance of other applications.

[#_references]
== References

[#_command_line_arguments]
=== Console CLI arguments

The following arguments can be used when you invoke TypeDB Console:

.Command line arguments
[cols=".^3,^.^1,5"]
|===
^| Argument ^| Alias ^| Description

3+^| TypeDB Community Edition specific
| `--core=<address>`
|
| Address to which Console will connect to: IP address and IP port separated by colon.
Default value: `localhost:1729`. +
(*TypeDB Community Edition only*)

3+^| TypeDB Cloud / Enterprise specific
| `--cloud=<address>`
|
| Address to which Console will connect to. +
(*TypeDB Cloud / Enterprise only*)

3+^| Common
| `--help`
| `-h`
| Show help message.

| `--username=<username>`
|
| Username. +

| `--password`
|
| Enable a password prompt. +

| `--tls-enabled`
|
| Whether to connect with TLS encryption. +

| `--tls-root-ca=<path>`
|
| Path to the TLS root CA file. +

| `--command=<commands>`
|
| Commands to run in the Console, without interactive mode.

| `--script=<script>`
|
| Script with commands to run in the Console, without interactive mode.

| `--version`
| `-V`
| Print version information and exit.

| `--diagnostics-disable=true`
|
| Disable anonymous error reporting.
|===

[#_server_level_commands]
=== Server level commands

Use these commands at the <<_server_level,Server level>> of TypeDB's <<_REPL,REPL>>:

.Server level commands (first level of REPL)
[cols=".^2,3"]
|===
^.^| Command ^.^| Description

2+^| Database management
| `database create <db>`
| Create a database with the name `<db>` on the server.

| `database list`
| List all databases on the server.

| `database delete <db>`
| Delete a database with the name `<db>` from the server.

// TODO: Not implemented in 3.0
// | `database schema <db>`
// | Print the schema of the database with the name `<db>` on the server

2+^| User management
| `user list`
| List all users on the server. +

| `user create <username>`
| Create a user with the name `<username>` on the server. +

| `user password-update <username> [new-password]`
a| [#_change_password]
Set password for the user with the name `username`. +

| `user delete <username>`
| Delete a user with the name `<username>` on the server. +

2+^| Open a transaction
| `transaction <db> read⎮write⎮schema [options]`
| Start a transaction to the database with the name `<db>` with a chosen transaction type.
You can set <<_transaction_options,transaction options>>.

2+^| Common
| `help`
| Print help menu.

| `clear`
| Clear console screen.

| `exit`
| Exit console.
|===

=== Transaction level commands

Use these commands in the Transaction level of TypeDB Console's <<_REPL,REPL>>.
The prompt at the Transaction level contains the database name and the transaction type, for example,
`sample_db::read>`.

.Transaction level commands (second level of REPL)
[cols=".^1,3"]
|===
^| Command ^.^| Description

2+^| Querying
| `<query>`
| Type in TypeQL query directly.
Push btn:[Enter] once for a line break in a query.
Push btn:[Enter] twice (once more on a new line) to send a query.

| `source <file>`
| Run TypeQL queries from a file. You can use a relative or absolute path. On Windows escape `\` by writing `\\`.

2+^| Transaction control
| `commit`
| Commit the changes and close the transaction.

| `rollback`
| Rollback the transaction -- remove any uncommitted changes, while leaving the transaction open.

| `close`
| Close the transaction without committing changes.

2+^| Common
| `help`
| Print help menu.

| `clear`
| Clear console screen.

| `exit`
| Exit console.
|===

[#_transaction_options]
=== Transaction options

NOTE: Work in progress

[#_version_compatibility]
== Version Compatibility

// tag::latest-compatibility[]
[cols="^.^2,^.^1,^.^2,^.^2"]
|===
| TypeDB Console | Protocol encoding version | TypeDB Community Edition | TypeDB

| https://github.com/vaticle/typedb-console/releases/tag/3.0.0[3.0.0]
| 4
| 3.0.0
| 3.0.0

|===
// end::latest-compatibility[]

// TODO: Uncomment block start (uncomment this block and remove the TODO lines when needed)
// // tag::older-compatibility[]
// .See older versions
// [%collapsible]
// ====
// [cols="^.^2,^.^1,^.^2,^.^2"]
// |===
// | TypeDB Console | Protocol encoding version | TypeDB Core | TypeDB Cloud
//
// |===
// ====
// TODO: Uncomment block end ^
// end::older-compatibility[]
// end::body[]
